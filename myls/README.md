# myls  
一个模仿linux `ls`命令的c++小项目，用于练习系统调用和库函数的使用  
  
## 功能  
- 遍历指定目录，支持当前目录默认
    - `-a` 显示所有文件，包括 `.`  
    - `-A` 显示除 `.`和`..` 外的隐藏文件
    - `-l` 长格式显示文件详细信息（权限、用户、组、大小、修改时间）

## 学习和使用的系统调用 / 库函数   
- 重点在复习文件操作和目录操作 
    - `opendir`, `readdir`, `closedir` （遍历目录）
    - `stat` （获取文件的信息）
    - `getpwuid`, `getgrgid` （获取用户名和组名）
    - `localtime` （处理时间）
    - `getopt` （解析命令行参数，提取选项）
    - `struct stat` , `struct dirent` （结构体使用练习）  

## 程序结构   
- `myls_dir`类封装了目录遍历、文件信息输出和选项操作  
- 遍历逻辑：  
    - `list_opration()` 负责遍历目录，调用`filter()`过滤掉不需要的文件  
- 信息显示逻辑：
    - `display_entries_info()` 负责输出选项（等待进一步拓展）
    - `long_format_show()`专门处理长格式的输出


## 学习收获  
1.了解并掌握 `stat` 结构体及其成员  
2.了解 `tm` 结构体 ，知道怎样从time_t转换为tm，理解tm的月份、年份偏移问题  
3.掌握命令行参数解析和选项组合逻辑
4.学会将遍历逻辑与显示逻辑分离，提高程序的模块化
5.学会使用man手册查看系统调用以及库函数的用法
6.学会书写出错检验
7.学会使用枚举类型作为功能的开关
8.熟悉日志打印调试程序  

## 使用示例  
**如果按照makefile的指令来编译，最终的可执行程序是main**
``bash
### 查看当前目录，长格式输出  
 ./main -l

### 显示所有文件  
 ./main -a  

### 指定目录  
 ./main -l /path/to/dir

